#include<iostream>#include<string>#include<fstream>using namespace std;char fname="file2.txt";struct record{char name[15],usn[15],sem[5],age[5],branch[10];};class student{public:void pack(record r);       record unpack(char a[]);       void writedata();       void search();       void display();       void modify();};void student::pack(record r){fstream fp;char buf[45];fp.open(fname,ios::out|ios::app);if(fp==NULL){cout<<"\ncannot open file";exit(0);}strcpy(buf,r.name);strcar(buf,"|");strcat(buf,r.usn);strcat(buf,"|");strcat(buf,r.sem);strcat(buf,"|");strcat(buf,r.age);strcat(buf."|");strcat(buf,r.branch);strcat(buf,"|*");fp<<buf<<endl;fp.close();}record student::unpack(char a[]){record r;int i=0,j=0;while(a[j]!='|')r.name[i++]=a[j++];r.name[i]='\0';i=0;j++;while(a[j]!='|')r.usn[i++]=a[j++];r.usn[i]='\0';i=0;j++;while(a[j]!='|')r.sem[i++]=a[j++];r.sem[i]='\0';i=0;j++;while(a[j]!='|')r.age[i++]=a[j++];r.age[i]='\0';i=0;j++;while(a[j]!='|')r.branch[i++]=a[j++];r.branch[i]='\0';return(r);}void student::writedata(){record r;cout<<"enter name";cin<<r.name;cout<<"usn";cin>>r.usn;cout<<"sem";cin<<r.sem;cout<<"age";cin<<r.age;cout<<"branch";cin<<r.branch;pack(r);}void student::display(){fstream fp;int c=0;record r;char buf[45];fp.open(fname,ios::in);if(fp==NULL){cout<<"\ncannot open file";exit(0);}cout<<"\n#\NAME\tUSN\tSEM\tAGE\tBRANCH\n";while(1){fp.getline(buf,45);if(fp.eof())break;r=unpack(buf);cout<<c++<<"\t"<<r.name<<"\t"<<r.usn<<"\t"<<r.sem<<"\t"<<r.age<<"\t"<<r.branch<<endl;}fp.close();return;}void student::modify(){fstream fp;char buf[45],usn[15];int i=0,j;record r[40];fp.open(fname,ios::in);if(fp==NULL){cout<<"\ncannot open file";exit(0);}cout<<"enter the usn to be modiefed";cin>>usn;while(1){fp.getline(buf,45,'*');if(fp.eof())break;r[i]=unpack(buf);i++;}for(j=0;j<i;j++){if(strcmp(r[j].usn,usn)==0){cout<<"values or the record to be maodified";cout<<"\nname:"<<r[j].name;cout<<"\nusn:"<<r[j].usn;cout<<"\nsem:"<<r[j].sem;cout<<"\nage:"<<r[j].age;cout<<"\nbranch:"<<r[j].branch;cout<<"enter the new values";cout<<"\nname:";cin>>r[i].name;cout<<"\nusn:";cin>>r[i].usn;cout<<"sem:";cin>>r[i].sem;cout<<"\nage:";cin>>r[i].age;cout<<"\nbarnch:";cin>>r[i].branch;break;}}if(j==i){cout<<"\nrecord not found";return;}fp.close();fstrem fd;fd.open(fname,ios::out|ios::trunc);if(fd==NULL){cout<<"\ncannot open file";exit(0);}for(j=;j<i;j++)pack(r[j]);fd.close()}void student::search(){fstream fp;char buf[45],usn[15];record r;int i,j;fp.open(fname,ios::in);if(fp==NULL){cout<<"\ncannot open file";exit(0);}cout<<"\nenter the usn to be searched";cin>>usn;i=0;while(1){fp.getline(buf,45,'*');if(fp.eof())break;r=unpack(buf);if(strcmp(r.usn,usn)==0){cout<<"\nrecord found";cout<<"\nname:"<<r.name;cout<<"\nusn:"<<r.usn;cout<<"\nsem:"<<r.sem;cout<<"\nage:"<<r.age;cout<<"\nbranch:"<<r.branch;return;}}cout<<"\nrecod  not found:";return;}void main(){int ch;student s;cout<<"\n1.writedata\n2.search\n3.display\n4.modify";while(1){cout<<"\nenter ur choice:";cin>>ch;switch(ch){case 1:s.writedata();break;case 2:s.search();break;case 3:s.display();break;case 4:s.modify();break;default:exit(0);}}}